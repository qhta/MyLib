<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:helpers="clr-namespace:Qhta.UnicodeBuild.Helpers"
                    xmlns:converters="clr-namespace:Qhta.WPF.Converters;assembly=Qhta.WPF.Converters"
                    xmlns:viewModels="clr-namespace:Qhta.UnicodeBuild.ViewModels"
                    xmlns:mvvm="clr-namespace:Qhta.MVVM;assembly=Qhta.MVVM"
                    x:Class="Qhta.UnicodeBuild.Helpers.AppResourceDictionary">
  <helpers:ViewModelsBindingProxy x:Key="ViewModels"/>
  <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
  <converters:BoolToTextWrappingConverter x:Key="BoolToTextWrappingConverter"/>
  <helpers:MappingNameToValueConverter x:Key="MappingNameToValueConverter"/>
  <helpers:RangeModelComparer x:Key="RangeModelComparer"/>

  <ContextMenu x:Key="CommonContextMenu">
    <MenuItem Header="Copy" Command="Copy"/>
    <MenuItem Header="Paste" Command="Paste"/>
    <MenuItem Header="Cut" Command="Cut"/>
  </ContextMenu>

  <DataTemplate x:Key="TextCellTemplate" DataType="{x:Type mvvm:IViewModel}">
    <TextBlock      
      Text="{Binding Path=TemplatedParent, 
      RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource MappingNameToValueConverter}}"
      Padding="3"
      ContextMenu="{StaticResource CommonContextMenu}" />
  </DataTemplate>
  
  <DataTemplate x:Key="LongTextCellTemplate" DataType="{x:Type viewModels:ILongTextViewModel}">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
      <TextBlock 
        Text ="{Binding Path=TemplatedParent, RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource MappingNameToValueConverter}}"
        Padding="3"
        TextWrapping="{Binding IsRowHeightExpanded, Converter={StaticResource BoolToTextWrappingConverter}}"/>
      <ToggleButton 
        Grid.Column="1"
        Visibility="{Binding CanExpandRowHeight, Converter={StaticResource BoolToVisibilityConverter}}"
        Height="20"
        VerticalAlignment="Top"
        Background="Transparent"
        BorderThickness="0"
        BorderBrush="Transparent"
        IsChecked="{Binding IsRowHeightExpanded, Mode=TwoWay}"
        Checked="WrapButton_CheckedChanged"
        Unchecked="WrapButton_CheckedChanged">
        <ToggleButton.Style>
          <Style TargetType="ToggleButton">
            <Setter Property="Content" Value="⏷"/>
            <Style.Triggers>
              <Trigger Property="IsChecked" Value="True">
                <Setter Property="Content" Value="⏶"/>
              </Trigger>
            </Style.Triggers>
          </Style>
        </ToggleButton.Style>
      </ToggleButton>
    </Grid>
  </DataTemplate>
</ResourceDictionary>